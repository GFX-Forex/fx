<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pay Bills - PayUtility</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            background: #f5f5f5;
            min-height: 100vh;
        }

        .container {
            max-width: 480px;
            margin: 0 auto;
            background: white;
            min-height: 100vh;
        }

        /* HEADER */
        .header {
            background: white;
            padding: 16px 20px;
            display: flex;
            align-items: center;
            gap: 16px;
            border-bottom: 1px solid #f3f4f6;
            position: sticky;
            top: 0;
            z-index: 10;
        }

        .back-btn {
            width: 36px;
            height: 36px;
            background: #f3f4f6;
            border: none;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 18px;
        }

        .header-title {
            flex: 1;
        }

        .header-title h1 {
            font-size: 18px;
            font-weight: 700;
            color: #1f2937;
            margin-bottom: 2px;
        }

        .header-title p {
            font-size: 12px;
            color: #6b7280;
            font-weight: 500;
        }

        .wallet-balance {
            text-align: right;
        }

        .wallet-label {
            font-size: 11px;
            color: #6b7280;
            font-weight: 500;
        }

        .wallet-amount {
            font-size: 15px;
            font-weight: 700;
            color: #1f2937;
        }

        /* SERVICE CATEGORIES */
        .categories {
            padding: 20px;
            background: white;
        }

        .categories-title {
            font-size: 14px;
            font-weight: 700;
            color: #374151;
            margin-bottom: 16px;
        }

        .categories-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin-bottom: 24px;
        }

        .category-card {
            aspect-ratio: 1;
            background: #f9fafb;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 8px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .category-card:active {
            transform: scale(0.95);
        }

        .category-card.selected {
            background: #eff6ff;
            border-color: #3b82f6;
        }

        .category-icon {
            font-size: 32px;
        }

        .category-name {
            font-size: 11px;
            font-weight: 600;
            color: #6b7280;
            text-align: center;
        }

        .category-card.selected .category-name {
            color: #3b82f6;
        }

        /* CONTENT */
        .content {
            padding: 0 20px 20px;
        }

        .form-section {
            display: none;
        }

        .form-section.active {
            display: block;
        }

        /* FORM ELEMENTS */
        .form-group {
            margin-bottom: 20px;
        }

        .label {
            font-size: 13px;
            font-weight: 700;
            color: #374151;
            margin-bottom: 10px;
            display: block;
        }

        /* METER TYPE TOGGLE */
        .meter-type-toggle {
            display: flex;
            gap: 8px;
            margin-bottom: 20px;
            background: #f9fafb;
            padding: 4px;
            border-radius: 12px;
        }

        .meter-type-btn {
            flex: 1;
            padding: 12px;
            background: transparent;
            border: none;
            border-radius: 10px;
            font-size: 14px;
            font-weight: 700;
            color: #6b7280;
            cursor: pointer;
            transition: all 0.2s;
        }

        .meter-type-btn.active {
            background: white;
            color: #3b82f6;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        /* CUSTOM PROVIDER SELECTOR */
        .provider-selector {
            position: relative;
        }

        .provider-display {
            width: 100%;
            padding: 16px;
            border: 1px solid #e5e7eb;
            border-radius: 12px;
            background: #f9fafb;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 12px;
            transition: all 0.2s;
        }

        .provider-display:hover {
            border-color: #3b82f6;
            background: white;
        }

        .provider-logo {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            background: white;
            border: 1px solid #e5e7eb;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }

        .provider-info {
            flex: 1;
        }

        .provider-name {
            font-size: 15px;
            font-weight: 600;
            color: #1f2937;
        }

        .provider-placeholder {
            font-size: 15px;
            font-weight: 600;
            color: #9ca3af;
        }

        .provider-code {
            font-size: 11px;
            color: #6b7280;
            margin-top: 2px;
        }

        .provider-arrow {
            font-size: 10px;
            color: #6b7280;
        }

        /* PROVIDER MODAL */
        .provider-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            animation: fadeIn 0.2s;
        }

        .provider-modal.active {
            display: flex;
            align-items: flex-end;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideUp {
            from { transform: translateY(100%); }
            to { transform: translateY(0); }
        }

        .provider-modal-content {
            background: white;
            width: 100%;
            max-width: 480px;
            margin: 0 auto;
            border-radius: 20px 20px 0 0;
            max-height: 70vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            animation: slideUp 0.3s;
        }

        .modal-header {
            padding: 20px;
            border-bottom: 1px solid #f3f4f6;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .modal-title {
            font-size: 16px;
            font-weight: 700;
            color: #1f2937;
        }

        .modal-close {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: #f3f4f6;
            border: none;
            cursor: pointer;
            font-size: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-body {
            overflow-y: auto;
            padding: 12px;
        }

        .provider-option {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 16px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s;
            margin-bottom: 8px;
        }

        .provider-option:hover {
            background: #f9fafb;
        }

        .provider-option:active {
            transform: scale(0.98);
        }

        .provider-option.selected {
            background: #eff6ff;
        }

        .provider-option-logo {
            width: 48px;
            height: 48px;
            border-radius: 10px;
            background: white;
            border: 1px solid #e5e7eb;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            flex-shrink: 0;
        }

        .provider-option-info {
            flex: 1;
        }

        .provider-option-name {
            font-size: 15px;
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 2px;
        }

        .provider-option-code {
            font-size: 12px;
            color: #6b7280;
        }

        .provider-option-radio {
            width: 22px;
            height: 22px;
            border: 2px solid #d1d5db;
            border-radius: 50%;
            position: relative;
            flex-shrink: 0;
        }

        .provider-option.selected .provider-option-radio {
            border-color: #3b82f6;
            background: #3b82f6;
        }

        .provider-option.selected .provider-option-radio::after {
            content: '‚úì';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-size: 12px;
            font-weight: 700;
        }

        .input-field {
            width: 100%;
            padding: 16px;
            border: 1px solid #e5e7eb;
            border-radius: 12px;
            font-size: 15px;
            font-weight: 600;
            color: #1f2937;
            background: #f9fafb;
        }

        .input-field:focus {
            outline: none;
            border-color: #3b82f6;
            background: white;
        }

        .verify-btn {
            width: 100%;
            padding: 14px;
            background: #3b82f6;
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 14px;
            font-weight: 700;
            cursor: pointer;
            margin-top: 12px;
            transition: all 0.2s;
        }

        .verify-btn:active {
            transform: scale(0.98);
        }

        .verify-btn:disabled {
            background: #e5e7eb;
            color: #9ca3af;
            cursor: not-allowed;
        }

        /* CUSTOMER INFO */
        .customer-info {
            background: #dcfce7;
            border-left: 4px solid #10b981;
            padding: 16px;
            border-radius: 12px;
            margin-bottom: 20px;
            display: none;
        }

        .customer-info.show {
            display: block;
        }

        .customer-info h4 {
            font-size: 13px;
            font-weight: 700;
            color: #065f46;
            margin-bottom: 10px;
        }

        .info-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 6px;
            font-size: 13px;
        }

        .info-row:last-child {
            margin-bottom: 0;
        }

        .info-label {
            color: #047857;
            font-weight: 500;
        }

        .info-value {
            color: #065f46;
            font-weight: 600;
        }

        /* AMOUNT INPUT */
        .amount-display {
            background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
            padding: 24px;
            border-radius: 16px;
            text-align: center;
            margin-bottom: 16px;
        }

        .amount-label {
            font-size: 12px;
            color: #1e40af;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .amount-input {
            background: none;
            border: none;
            font-size: 36px;
            font-weight: 700;
            color: #1e3a8a;
            text-align: center;
            width: 100%;
        }

        .amount-input:focus {
            outline: none;
        }

        .quick-amounts {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
            margin-bottom: 24px;
        }

        .quick-amt {
            padding: 12px 8px;
            background: #f9fafb;
            border: 1px solid #e5e7eb;
            border-radius: 10px;
            font-size: 13px;
            font-weight: 700;
            color: #6b7280;
            cursor: pointer;
            transition: all 0.2s;
        }

        .quick-amt:active {
            transform: scale(0.95);
        }

        .quick-amt.active {
            background: #3b82f6;
            border-color: #3b82f6;
            color: white;
        }

        /* NEW PACKAGE SELECTOR */
        .package-selector-container {
            margin-bottom: 20px;
        }

        .select-package-btn {
            width: 100%;
            padding: 18px;
            background: #f9fafb;
            border: 1px solid #e5e7eb;
            border-radius: 12px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: space-between;
            transition: all 0.2s;
        }

        .select-package-btn:hover {
            border-color: #3b82f6;
            background: white;
        }

        .select-package-text {
            font-size: 14px;
            font-weight: 600;
            color: #4b5563;
        }

        .select-package-arrow {
            font-size: 12px;
            color: #6b7280;
            transition: transform 0.3s;
        }

        .select-package-btn.expanded .select-package-arrow {
            transform: rotate(180deg);
        }

        /* PACKAGE LIST - Single Column, Full Width */
        .packages-list {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }

        .packages-list.expanded {
            max-height: 2000px;
        }

        .package-item {
            background: #f9fafb;
            border: 1px solid #e5e7eb;
            border-radius: 12px;
            padding: 18px 20px;
            margin-top: 10px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .package-item:hover {
            background: white;
            border-color: #3b82f6;
        }

        .package-item:active {
            transform: scale(0.98);
        }

        .package-item-left {
            flex: 1;
        }

        .package-item-name {
            font-size: 15px;
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 4px;
        }

        .package-item-details {
            font-size: 12px;
            color: #6b7280;
            font-weight: 500;
        }

        .package-item-price {
            font-size: 18px;
            font-weight: 700;
            color: #3b82f6;
            margin-right: 12px;
        }

        .package-item-radio {
            width: 20px;
            height: 20px;
            border: 2px solid #d1d5db;
            border-radius: 50%;
            position: relative;
            flex-shrink: 0;
        }

        /* SELECTED PACKAGE DISPLAY */
        .selected-package-display {
            background: #f9fafb;
            border: 2px solid #3b82f6;
            border-radius: 12px;
            padding: 18px 20px;
            display: none;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .selected-package-display.show {
            display: flex;
        }

        .selected-package-info {
            flex: 1;
        }

        .selected-package-name {
            font-size: 15px;
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 4px;
        }

        .selected-package-details {
            font-size: 12px;
            color: #6b7280;
            font-weight: 500;
        }

        .selected-package-price {
            font-size: 18px;
            font-weight: 700;
            color: #3b82f6;
            margin-right: 12px;
        }

        .change-package-btn {
            background: #eff6ff;
            color: #3b82f6;
            border: none;
            padding: 8px 16px;
            border-radius: 8px;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .change-package-btn:hover {
            background: #dbeafe;
        }

        /* SUMMARY */
        .summary-box {
            background: #fef3c7;
            border-left: 4px solid #f59e0b;
            padding: 16px;
            border-radius: 12px;
            margin-bottom: 20px;
        }

        .summary-title {
            font-size: 13px;
            font-weight: 700;
            color: #92400e;
            margin-bottom: 12px;
        }

        .summary-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 13px;
        }

        .summary-row:last-child {
            margin-bottom: 0;
            padding-top: 8px;
            border-top: 1px solid #fcd34d;
            font-weight: 700;
        }

        .summary-label {
            color: #78350f;
            font-weight: 500;
        }

        .summary-value {
            color: #92400e;
            font-weight: 600;
        }

        /* PROCEED BUTTON */
        .proceed-btn {
            width: 100%;
            padding: 18px;
            background: #3b82f6;
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s;
        }

        .proceed-btn:active {
            transform: scale(0.98);
        }

        .proceed-btn:disabled {
            background: #e5e7eb;
            color: #9ca3af;
            cursor: not-allowed;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- HEADER -->
        <div class="header">
            <button class="back-btn" onclick="history.back()">‚Üê</button>
            <div class="header-title">
                <h1>Pay Bills</h1>
                <p>Electricity, TV, Internet & more</p>
            </div>
            <div class="wallet-balance">
                <div class="wallet-label">Balance</div>
                <div class="wallet-amount">‚Ç¶125,450</div>
            </div>
        </div>

        <!-- SERVICE CATEGORIES -->
        <div class="categories">
            <div class="categories-title">Select Service</div>
            <div class="categories-grid">
                <div class="category-card" data-service="electricity">
                    <div class="category-icon">‚ö°</div>
                    <div class="category-name">Electricity</div>
                </div>
                <div class="category-card" data-service="tv">
                    <div class="category-icon">üì∫</div>
                    <div class="category-name">Cable TV</div>
                </div>
                <div class="category-card" data-service="internet">
                    <div class="category-icon">üåê</div>
                    <div class="category-name">Internet</div>
                </div>
                <div class="category-card" data-service="betting">
                    <div class="category-icon">üé≤</div>
                    <div class="category-name">Betting</div>
                </div>
                <div class="category-card" data-service="education">
                    <div class="category-icon">üéì</div>
                    <div class="category-name">Education</div>
                </div>
                <div class="category-card" data-service="insurance">
                    <div class="category-icon">üõ°Ô∏è</div>
                    <div class="category-name">Insurance</div>
                </div>
            </div>
        </div>

        <!-- CONTENT -->
        <div class="content">
            <!-- ELECTRICITY FORM -->
            <div class="form-section" id="electricity-form">
                <div class="form-group">
                    <label class="label">Meter Type</label>
                    <div class="meter-type-toggle">
                        <button class="meter-type-btn active" data-type="prepaid">‚ö° Prepaid</button>
                        <button class="meter-type-btn" data-type="postpaid">üìã Postpaid</button>
                    </div>
                </div>

                <div class="form-group">
                    <label class="label">Select Provider</label>
                    <div class="provider-selector">
                        <div class="provider-display" id="elecProviderDisplay">
                            <div class="provider-placeholder">Choose provider</div>
                            <div class="provider-arrow">‚ñº</div>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label class="label">Meter Number</label>
                    <input type="text" class="input-field" id="meterNumber" placeholder="Enter meter number" maxlength="13">
                    <button class="verify-btn" id="verifyMeterBtn" disabled>Verify Meter Number</button>
                </div>

                <div class="customer-info" id="customerInfo">
                    <h4>‚úì Customer Details Verified</h4>
                    <div class="info-row">
                        <span class="info-label">Customer Name:</span>
                        <span class="info-value">Emmanuel Adeola</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Meter Type:</span>
                        <span class="info-value" id="displayMeterType">Prepaid</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Address:</span>
                        <span class="info-value">Lekki Phase 1, Lagos</span>
                    </div>
                </div>

                <div class="form-group">
                    <label class="label">Enter Amount</label>
                    <div class="amount-display">
                        <div class="amount-label">Amount to Pay</div>
                        <input type="text" class="amount-input" id="electricityAmount" placeholder="‚Ç¶0" value="‚Ç¶">
                    </div>
                    <div class="quick-amounts">
                        <button class="quick-amt" data-amount="2000">‚Ç¶2,000</button>
                        <button class="quick-amt" data-amount="5000">‚Ç¶5,000</button>
                        <button class="quick-amt" data-amount="10000">‚Ç¶10,000</button>
                    </div>
                </div>

                <div class="summary-box">
                    <div class="summary-title">Transaction Summary</div>
                    <div class="summary-row">
                        <span class="summary-label">Provider:</span>
                        <span class="summary-value" id="elecSummaryProvider">-</span>
                    </div>
                    <div class="summary-row">
                        <span class="summary-label">Meter Number:</span>
                        <span class="summary-value" id="elecSummaryMeter">-</span>
                    </div>
                    <div class="summary-row">
                        <span class="summary-label">Meter Type:</span>
                        <span class="summary-value" id="elecSummaryType">Prepaid</span>
                    </div>
                    <div class="summary-row">
                        <span class="summary-label">Amount:</span>
                        <span class="summary-value" id="elecSummaryAmount">‚Ç¶0</span>
                    </div>
                    <div class="summary-row">
                        <span class="summary-label">You Pay:</span>
                        <span class="summary-value" id="elecSummaryTotal">‚Ç¶0</span>
                    </div>
                </div>

                <button class="proceed-btn" id="elecProceedBtn" disabled>Proceed to Payment</button>
            </div>

            <!-- TV FORM -->
            <div class="form-section" id="tv-form">
                <div class="form-group">
                    <label class="label">Select Provider</label>
                    <div class="provider-selector">
                        <div class="provider-display" id="tvProviderDisplay">
                            <div class="provider-placeholder">Choose provider</div>
                            <div class="provider-arrow">‚ñº</div>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label class="label">Smart Card / IUC Number</label>
                    <input type="text" class="input-field" id="smartCard" placeholder="Enter card number" maxlength="11">
                    <button class="verify-btn" id="verifyCardBtn" disabled>Verify Card Number</button>
                </div>

                <div class="customer-info" id="tvCustomerInfo">
                    <h4>‚úì Customer Details Verified</h4>
                    <div class="info-row">
                        <span class="info-label">Customer Name:</span>
                        <span class="info-value">Emmanuel Adeola</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Current Package:</span>
                        <span class="info-value" id="currentPackageInfo">DSTV Compact</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Status:</span>
                        <span class="info-value">Active</span>
                    </div>
                </div>

                <div class="form-group">
                    <label class="label">Select Package</label>
                    
                    <!-- Selected Package Display -->
                    <div class="selected-package-display" id="selectedPackageDisplay">
                        <div class="selected-package-info">
                            <div class="selected-package-name" id="selectedPackageName">-</div>
                            <div class="selected-package-details" id="selectedPackageDetails">-</div>
                        </div>
                        <div class="selected-package-price" id="selectedPackagePrice">‚Ç¶0</div>
                        <button class="change-package-btn" id="changePackageBtn">Change</button>
                    </div>

                    <!-- Package Selector -->
                    <div class="package-selector-container" id="packageSelectorContainer">
                        <div class="select-package-btn" id="selectPackageBtn">
                            <span class="select-package-text">Select Package</span>
                            <span class="select-package-arrow">‚ñº</span>
                        </div>
                        
                        <div class="packages-list" id="packagesList">
                            <!-- Packages will be dynamically loaded here -->
                        </div>
                    </div>
                </div>

                <div class="summary-box">
                    <div class="summary-title">Transaction Summary</div>
                    <div class="summary-row">
                        <span class="summary-label">Provider:</span>
                        <span class="summary-value" id="tvSummaryProvider">-</span>
                    </div>
                    <div class="summary-row">
                        <span class="summary-label">Card Number:</span>
                        <span class="summary-value" id="tvSummaryCard">-</span>
                    </div>
                    <div class="summary-row">
                        <span class="summary-label">Package:</span>
                        <span class="summary-value" id="tvSummaryPackage">-</span>
                    </div>
                    <div class="summary-row">
                        <span class="summary-label">You Pay:</span>
                        <span class="summary-value" id="tvSummaryTotal">‚Ç¶0</span>
                    </div>
                </div>

                <button class="proceed-btn" id="tvProceedBtn" disabled>Proceed to Payment</button>
            </div>

            <!-- OTHER FORMS -->
            <div class="form-section" id="internet-form">
                <div class="customer-info show">
                    <h4>‚ÑπÔ∏è Coming Soon</h4>
                    <p style="color: #047857; font-size: 13px;">Internet bill payment will be available soon!</p>
                </div>
            </div>

            <div class="form-section" id="betting-form">
                <div class="customer-info show">
                    <h4>‚ÑπÔ∏è Coming Soon</h4>
                    <p style="color: #047857; font-size: 13px;">Betting wallet funding will be available soon!</p>
                </div>
            </div>

            <div class="form-section" id="education-form">
                <div class="customer-info show">
                    <h4>‚ÑπÔ∏è Coming Soon</h4>
                    <p style="color: #047857; font-size: 13px;">Education services will be available soon!</p>
                </div>
            </div>

            <div class="form-section" id="insurance-form">
                <div class="customer-info show">
                    <h4>‚ÑπÔ∏è Coming Soon</h4>
                    <p style="color: #047857; font-size: 13px;">Insurance payment will be available soon!</p>
                </div>
            </div>
        </div>
    </div>

    <!-- ELECTRICITY PROVIDER MODAL -->
    <div class="provider-modal" id="elecProviderModal">
        <div class="provider-modal-content">
            <div class="modal-header">
                <div class="modal-title">Select Provider</div>
                <button class="modal-close" onclick="closeElecModal()">‚úï</button>
            </div>
            <div class="modal-body" id="elecProviderList"></div>
        </div>
    </div>

    <!-- TV PROVIDER MODAL -->
    <div class="provider-modal" id="tvProviderModal">
        <div class="provider-modal-content">
            <div class="modal-header">
                <div class="modal-title">Select Provider</div>
                <button class="modal-close" onclick="closeTvModal()">‚úï</button>
            </div>
            <div class="modal-body" id="tvProviderList"></div>
        </div>
    </div>

    <script>
        // Provider Data
        const electricityProviders = [
            { code: 'IKEDC', name: 'Ikeja Electric', logo: '‚ö°', fullName: 'Ikeja Electric Payment - IKEDC' },
            { code: 'EKEDC', name: 'Eko Electric', logo: '‚ö°', fullName: 'Eko Electric Payment - EKEDC' },
            { code: 'AEDC', name: 'Abuja Electricity', logo: '‚ö°', fullName: 'Abuja Electricity Distribution Company - AEDC' },
            { code: 'KEDCO', name: 'Kano Electric', logo: '‚ö°', fullName: 'KEDCO - Kano Electric' },
            { code: 'PHED', name: 'Port Harcourt Electric', logo: '‚ö°', fullName: 'PHED - Port Harcourt Electric' },
            { code: 'JED', name: 'Jos Electric', logo: '‚ö°', fullName: 'Jos Electric - JED' },
            { code: 'KAEDCO', name: 'Kaduna Electric', logo: '‚ö°', fullName: 'Kaduna Electric - KAEDCO' },
            { code: 'EEDC', name: 'Enugu Electric', logo: '‚ö°', fullName: 'Enugu Electric - EEDC' }
        ];

        const tvProviders = [
            { 
                code: 'DSTV', 
                name: 'DStv', 
                logo: 'üì°',
                packages: [
                    { name: 'DSTV Padi', price: 2500, duration: '1 month', channels: '40+', variationCode: 'dstv-padi' },
                    { name: 'DSTV Yanga', price: 3500, duration: '1 month', channels: '50+', variationCode: 'dstv-yanga' },
                    { name: 'DSTV Compact', price: 6800, duration: '1 month', channels: '90+', variationCode: 'dstv-compact' },
                    { name: 'DSTV Compact Plus', price: 10500, duration: '1 month', channels: '120+', variationCode: 'dstv-compact-plus' },
                    { name: 'DSTV Premium', price: 21000, duration: '1 month', channels: 'All channels', variationCode: 'dstv-premium' }
                ]
            },
            { 
                code: 'GOTV', 
                name: 'GOtv', 
                logo: 'üì∫',
                packages: [
                    { name: 'GOtv Smallie', price: 1300, duration: '1 month', channels: '25+', variationCode: 'gotv-smallie' },
                    { name: 'GOtv Jinja', price: 3900, duration: '1 month', channels: '45+', variationCode: 'gotv-jinja' },
                    { name: 'GOtv Jolli', price: 5800, duration: '1 month', channels: '65+', variationCode: 'gotv-jolli' },
                    { name: 'GOtv Max', price: 8500, duration: '1 month', channels: '80+', variationCode: 'gotv-max' },
                    { name: 'GOtv Supa', price: 11400, duration: '1 month', channels: '95+', variationCode: 'gotv-supa' },
                    { name: 'GOtv Supa Plus', price: 16800, duration: '1 month', channels: '110+', variationCode: 'gotv-supa-plus' }
                ]
            },
            { 
                code: 'STARTIMES', 
                name: 'StarTimes', 
                logo: '‚≠ê',
                packages: [
                    { name: 'Nova', price: 1200, duration: '1 month', channels: '30+', variationCode: 'startimes-nova' },
                    { name: 'Basic', price: 2100, duration: '1 month', channels: '40+', variationCode: 'startimes-basic' },
                    { name: 'Smart', price: 2800, duration: '1 month', channels: '50+', variationCode: 'startimes-smart' },
                    { name: 'Classic', price: 3600, duration: '1 month', channels: '60+', variationCode: 'startimes-classic' },
                    { name: 'Super', price: 5300, duration: '1 month', channels: '75+', variationCode: 'startimes-super' },
                    { name: 'Ultra', price: 8000, duration: '1 month', channels: '90+', variationCode: 'startimes-ultra' }
                ]
            },
            { 
                code: 'SHOWMAX', 
                name: 'Showmax', 
                logo: 'üé¨',
                packages: [
                    { name: 'Mobile', price: 1450, duration: '1 month', channels: 'Mobile only', variationCode: 'showmax-mobile' },
                    { name: 'Standard', price: 2900, duration: '1 month', channels: 'All devices', variationCode: 'showmax-standard' },
                    { name: 'Pro', price: 6300, duration: '1 month', channels: 'Pro content', variationCode: 'showmax-pro' },
                    { name: 'Pro Mobile', price: 3200, duration: '1 month', channels: 'Pro mobile', variationCode: 'showmax-pro-mobile' }
                ]
            }
        ];

        // State
        let elecData = { provider: null, meter: '', amount: 0, verified: false, meterType: 'prepaid' };
        let tvData = { provider: null, card: '', package: null, price: 0, verified: false, variationCode: '' };
        let packagesExpanded = false;

        // Initialize modals
        function initElecProviderModal() {
            const list = document.getElementById('elecProviderList');
            list.innerHTML = electricityProviders.map(p => `
                <div class="provider-option" data-code="${p.code}">
                    <div class="provider-option-logo">${p.logo}</div>
                    <div class="provider-option-info">
                        <div class="provider-option-name">${p.fullName}</div>
                        <div class="provider-option-code">${p.code}</div>
                    </div>
                    <div class="provider-option-radio"></div>
                </div>
            `).join('');

            document.querySelectorAll('#elecProviderList .provider-option').forEach(opt => {
                opt.addEventListener('click', function() {
                    selectElecProvider(this.dataset.code);
                });
            });
        }

        function initTvProviderModal() {
            const list = document.getElementById('tvProviderList');
            list.innerHTML = tvProviders.map(p => `
                <div class="provider-option" data-code="${p.code}">
                    <div class="provider-option-logo">${p.logo}</div>
                    <div class="provider-option-info">
                        <div class="provider-option-name">${p.name}</div>
                        <div class="provider-option-code">${p.code}</div>
                    </div>
                    <div class="provider-option-radio"></div>
                </div>
            `).join('');

            document.querySelectorAll('#tvProviderList .provider-option').forEach(opt => {
                opt.addEventListener('click', function() {
                    selectTvProvider(this.dataset.code);
                });
            });
        }

        // Meter Type Toggle
        const meterTypeBtns = document.querySelectorAll('.meter-type-btn');
        meterTypeBtns.forEach(btn => {
            btn.addEventListener('click', function() {
                meterTypeBtns.forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                elecData.meterType = this.dataset.type;
                document.getElementById('elecSummaryType').textContent = this.dataset.type === 'prepaid' ? 'Prepaid' : 'Postpaid';
                document.getElementById('displayMeterType').textContent = this.dataset.type === 'prepaid' ? 'Prepaid' : 'Postpaid';
            });
        });

        // Select Electricity Provider
        function selectElecProvider(code) {
            const provider = electricityProviders.find(p => p.code === code);
            elecData.provider = provider;

            const display = document.getElementById('elecProviderDisplay');
            display.innerHTML = `
                <div class="provider-logo">${provider.logo}</div>
                <div class="provider-info">
                    <div class="provider-name">${provider.name}</div>
                    <div class="provider-code">${provider.code}</div>
                </div>
                <div class="provider-arrow">‚ñº</div>
            `;

            document.getElementById('elecSummaryProvider').textContent = provider.name;

            document.querySelectorAll('#elecProviderList .provider-option').forEach(opt => {
                opt.classList.toggle('selected', opt.dataset.code === code);
            });

            closeElecModal();
            validateElec();
        }

        // Select TV Provider
        function selectTvProvider(code) {
            const provider = tvProviders.find(p => p.code === code);
            tvData.provider = provider;

            const display = document.getElementById('tvProviderDisplay');
            display.innerHTML = `
                <div class="provider-logo">${provider.logo}</div>
                <div class="provider-info">
                    <div class="provider-name">${provider.name}</div>
                    <div class="provider-code">${provider.code}</div>
                </div>
                <div class="provider-arrow">‚ñº</div>
            `;

            document.getElementById('tvSummaryProvider').textContent = provider.name;

            document.querySelectorAll('#tvProviderList .provider-option').forEach(opt => {
                opt.classList.toggle('selected', opt.dataset.code === code);
            });

            loadTvPackages(provider.packages);
            closeTvModal();
        }

        // Load TV Packages
        function loadTvPackages(packages) {
            const container = document.getElementById('packagesList');
            container.innerHTML = packages.map(pkg => `
                <div class="package-item" data-package="${pkg.name}" data-price="${pkg.price}" data-variation="${pkg.variationCode}" data-channels="${pkg.channels}" data-duration="${pkg.duration}">
                    <div class="package-item-left">
                        <div class="package-item-name">${pkg.name}</div>
                        <div class="package-item-details">${pkg.channels} ‚Ä¢ ${pkg.duration}</div>
                    </div>
                    <div class="package-item-price">‚Ç¶${pkg.price.toLocaleString()}</div>
                    <div class="package-item-radio"></div>
                </div>
            `).join('');

            document.querySelectorAll('#packagesList .package-item').forEach(card => {
                card.addEventListener('click', function() {
                    selectPackage(this);
                });
            });

            // Reset state
            tvData.package = null;
            tvData.price = 0;
            tvData.variationCode = '';
            packagesExpanded = false;
            document.getElementById('packagesList').classList.remove('expanded');
            document.getElementById('selectPackageBtn').classList.remove('expanded');
            document.getElementById('selectedPackageDisplay').classList.remove('show');
            document.getElementById('packageSelectorContainer').style.display = 'block';
            document.getElementById('tvSummaryPackage').textContent = '-';
            document.getElementById('tvSummaryTotal').textContent = '‚Ç¶0';
            validateTV();
        }

        // Select Package
        function selectPackage(element) {
            const name = element.dataset.package;
            const price = parseInt(element.dataset.price);
            const variation = element.dataset.variation;
            const channels = element.dataset.channels;
            const duration = element.dataset.duration;

            tvData.package = name;
            tvData.price = price;
            tvData.variationCode = variation;

            // Update selected package display
            document.getElementById('selectedPackageName').textContent = name;
            document.getElementById('selectedPackageDetails').textContent = `${channels} ‚Ä¢ ${duration}`;
            document.getElementById('selectedPackagePrice').textContent = '‚Ç¶' + price.toLocaleString();

            // Hide selector, show selected
            document.getElementById('packagesList').classList.remove('expanded');
            document.getElementById('selectPackageBtn').classList.remove('expanded');
            document.getElementById('packageSelectorContainer').style.display = 'none';
            document.getElementById('selectedPackageDisplay').classList.add('show');

            // Update summary
            document.getElementById('tvSummaryPackage').textContent = name;
            document.getElementById('tvSummaryTotal').textContent = '‚Ç¶' + price.toLocaleString();

            validateTV();
        }

        // Toggle package list
        document.getElementById('selectPackageBtn').addEventListener('click', function() {
            packagesExpanded = !packagesExpanded;
            document.getElementById('packagesList').classList.toggle('expanded', packagesExpanded);
            this.classList.toggle('expanded', packagesExpanded);
        });

        // Change package button
        document.getElementById('changePackageBtn').addEventListener('click', function() {
            document.getElementById('selectedPackageDisplay').classList.remove('show');
            document.getElementById('packageSelectorContainer').style.display = 'block';
            document.getElementById('packagesList').classList.add('expanded');
            document.getElementById('selectPackageBtn').classList.add('expanded');
            packagesExpanded = true;
        });

        // Modal controls
        function openElecModal() {
            document.getElementById('elecProviderModal').classList.add('active');
        }

        function closeElecModal() {
            document.getElementById('elecProviderModal').classList.remove('active');
        }

        function openTvModal() {
            document.getElementById('tvProviderModal').classList.add('active');
        }

        function closeTvModal() {
            document.getElementById('tvProviderModal').classList.remove('active');
        }

        document.getElementById('elecProviderModal').addEventListener('click', function(e) {
            if (e.target === this) closeElecModal();
        });

        document.getElementById('tvProviderModal').addEventListener('click', function(e) {
            if (e.target === this) closeTvModal();
        });

        // Initialize
        initElecProviderModal();
        initTvProviderModal();

        document.getElementById('elecProviderDisplay').addEventListener('click', openElecModal);
        document.getElementById('tvProviderDisplay').addEventListener('click', openTvModal);

        // Category selection
        const categories = document.querySelectorAll('.category-card');
        const formSections = document.querySelectorAll('.form-section');

        categories.forEach(cat => {
            cat.addEventListener('click', function() {
                categories.forEach(c => c.classList.remove('selected'));
                formSections.forEach(f => f.classList.remove('active'));
                this.classList.add('selected');
                document.getElementById(this.dataset.service + '-form').classList.add('active');
            });
        });

        // ELECTRICITY LOGIC
        const meterNumber = document.getElementById('meterNumber');
        const verifyMeterBtn = document.getElementById('verifyMeterBtn');
        const customerInfo = document.getElementById('customerInfo');
        const elecAmount = document.getElementById('electricityAmount');
        const elecQuickBtns = document.querySelectorAll('#electricity-form .quick-amt');

        meterNumber.addEventListener('input', function() {
            elecData.meter = this.value;
            document.getElementById('elecSummaryMeter').textContent = this.value || '-';
            verifyMeterBtn.disabled = this.value.length < 10;
            elecData.verified = false;
            customerInfo.classList.remove('show');
            validateElec();
        });

        verifyMeterBtn.addEventListener('click', function() {
            this.textContent = 'Verifying...';
            this.disabled = true;
            setTimeout(() => {
                customerInfo.classList.add('show');
                this.textContent = '‚úì Verified';
                elecData.verified = true;
                validateElec();
            }, 1500);
        });

        elecAmount.addEventListener('input', function() {
            let val = this.value.replace(/[^0-9]/g, '');
            elecData.amount = parseInt(val) || 0;
            this.value = elecData.amount ? '‚Ç¶' + elecData.amount.toLocaleString() : '‚Ç¶';
            document.getElementById('elecSummaryAmount').textContent = '‚Ç¶' + elecData.amount.toLocaleString();
            document.getElementById('elecSummaryTotal').textContent = '‚Ç¶' + elecData.amount.toLocaleString();
            validateElec();
        });

        elecQuickBtns.forEach(btn => {
            btn.addEventListener('click', function() {
                elecQuickBtns.forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                elecData.amount = parseInt(this.dataset.amount);
                elecAmount.value = '‚Ç¶' + elecData.amount.toLocaleString();
                document.getElementById('elecSummaryAmount').textContent = '‚Ç¶' + elecData.amount.toLocaleString();
                document.getElementById('elecSummaryTotal').textContent = '‚Ç¶' + elecData.amount.toLocaleString();
                validateElec();
            });
        });

        function validateElec() {
            document.getElementById('elecProceedBtn').disabled = !(elecData.provider && elecData.verified && elecData.amount >= 1000);
        }

        document.getElementById('elecProceedBtn').addEventListener('click', function() {
            alert(`‚úì Electricity Bill Payment\n\nProvider: ${elecData.provider.name}\nMeter Type: ${elecData.meterType === 'prepaid' ? 'Prepaid' : 'Postpaid'}\nMeter: ${elecData.meter}\nAmount: ‚Ç¶${elecData.amount.toLocaleString()}\n\nProcessing payment...`);
        });

        // TV LOGIC
        const smartCard = document.getElementById('smartCard');
        const verifyCardBtn = document.getElementById('verifyCardBtn');
        const tvCustomerInfo = document.getElementById('tvCustomerInfo');

        smartCard.addEventListener('input', function() {
            tvData.card = this.value;
            document.getElementById('tvSummaryCard').textContent = this.value || '-';
            verifyCardBtn.disabled = this.value.length < 10;
            tvData.verified = false;
            tvCustomerInfo.classList.remove('show');
            validateTV();
        });

        verifyCardBtn.addEventListener('click', function() {
            this.textContent = 'Verifying...';
            this.disabled = true;
            setTimeout(() => {
                tvCustomerInfo.classList.add('show');
                this.textContent = '‚úì Verified';
                tvData.verified = true;
                
                if (tvData.provider) {
                    const currentPkg = tvData.provider.packages[2].name;
                    document.getElementById('currentPackageInfo').textContent = currentPkg;
                }
                
                validateTV();
            }, 1500);
        });

        function validateTV() {
            document.getElementById('tvProceedBtn').disabled = !(tvData.provider && tvData.verified && tvData.package);
        }

        document.getElementById('tvProceedBtn').addEventListener('click', function() {
            alert(`‚úì Cable TV Subscription\n\nProvider: ${tvData.provider.name}\nCard: ${tvData.card}\nPackage: ${tvData.package}\nVariation Code: ${tvData.variationCode}\nAmount: ‚Ç¶${tvData.price.toLocaleString()}\n\nProcessing payment...`);
        });
    </script>
</body>
</html>
