<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add Money - PayUtility</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            background: #f5f5f5;
            min-height: 100vh;
            padding-bottom: 80px;
        }

        .container {
            max-width: 480px;
            margin: 0 auto;
            background: white;
            min-height: 100vh;
        }

        /* Header */
        .header {
            background: white;
            padding: 16px 20px;
            border-bottom: 1px solid #f3f4f6;
            position: sticky;
            top: 0;
            z-index: 10;
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .back-btn {
            width: 36px;
            height: 36px;
            background: transparent;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 20px;
            color: #1f2937;
        }

        .header-title {
            font-size: 18px;
            font-weight: 700;
            color: #1f2937;
        }

        /* Content */
        .content {
            padding: 20px;
        }

        /* Account Number Card */
        .account-card {
            background: white;
            border: 2px solid #f3f4f6;
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 24px;
        }

        .account-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
        }

        .account-icon {
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
        }

        .account-info {
            flex: 1;
        }

        .account-title {
            font-size: 16px;
            font-weight: 700;
            color: #1f2937;
            margin-bottom: 4px;
        }

        .account-subtitle {
            font-size: 13px;
            color: #6b7280;
            font-weight: 500;
        }

        .account-label {
            font-size: 12px;
            color: #6b7280;
            font-weight: 600;
            margin-bottom: 8px;
            text-transform: uppercase;
        }

        .account-number {
            font-size: 28px;
            font-weight: 800;
            color: #1f2937;
            letter-spacing: 2px;
            margin-bottom: 16px;
            font-family: 'Courier New', monospace;
        }

        .account-actions {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
        }

        .action-btn {
            padding: 12px 20px;
            border: none;
            border-radius: 10px;
            font-size: 14px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .action-btn.copy {
            background: #f0fdf4;
            color: #059669;
            border: 2px solid #bbf7d0;
        }

        .action-btn.copy:active {
            transform: scale(0.98);
            background: #dcfce7;
        }

        .action-btn.share {
            background: linear-gradient(135deg, #059669 0%, #10b981 100%);
            color: white;
        }

        .action-btn.share:active {
            transform: scale(0.98);
        }

        /* Divider */
        .divider {
            text-align: center;
            position: relative;
            margin: 24px 0;
        }

        .divider::before,
        .divider::after {
            content: '';
            position: absolute;
            top: 50%;
            width: 40%;
            height: 1px;
            background: #e5e7eb;
        }

        .divider::before {
            left: 0;
        }

        .divider::after {
            right: 0;
        }

        .divider-text {
            font-size: 13px;
            color: #9ca3af;
            font-weight: 600;
            background: white;
            padding: 0 16px;
        }

        /* Options List */
        .options-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .option-item {
            background: white;
            border: 2px solid #f3f4f6;
            border-radius: 16px;
            padding: 16px;
            display: flex;
            align-items: center;
            gap: 16px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .option-item:active {
            transform: scale(0.98);
            border-color: #3b82f6;
        }

        .option-icon {
            width: 48px;
            height: 48px;
            background: #f9fafb;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            flex-shrink: 0;
        }

        .option-content {
            flex: 1;
        }

        .option-title {
            font-size: 15px;
            font-weight: 700;
            color: #1f2937;
            margin-bottom: 4px;
        }

        .option-description {
            font-size: 13px;
            color: #6b7280;
            font-weight: 500;
            line-height: 1.4;
        }

        .option-arrow {
            font-size: 20px;
            color: #9ca3af;
        }

        /* Bottom Nav */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100%;
            max-width: 480px;
            background: white;
            border-top: 1px solid #f3f4f6;
            display: flex;
            justify-content: space-around;
            padding: 10px 0 12px;
            z-index: 100;
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            cursor: pointer;
            flex: 1;
        }

        .nav-icon {
            font-size: 24px;
            opacity: 0.5;
        }

        .nav-item.active .nav-icon {
            opacity: 1;
        }

        .nav-label {
            font-size: 11px;
            font-weight: 600;
            color: #9ca3af;
        }

        .nav-item.active .nav-label {
            color: #3b82f6;
        }

        /* Toast */
        .toast {
            position: fixed;
            bottom: 100px;
            left: 50%;
            transform: translateX(-50%);
            background: #1f2937;
            color: white;
            padding: 14px 20px;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 600;
            z-index: 1000;
            display: none;
            animation: slideUp 0.3s ease-out;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }

        .toast.show {
            display: block;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateX(-50%) translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateX(-50%) translateY(0);
            }
        }

        /* Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(4px);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            padding: 20px;
        }

        .modal-overlay.active {
            display: flex;
        }

        .modal {
            background: white;
            border-radius: 20px;
            max-width: 400px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            animation: modalSlide 0.3s ease-out;
        }

        @keyframes modalSlide {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .modal-header {
            padding: 24px 24px 16px;
            border-bottom: 1px solid #f3f4f6;
        }

        .modal-title {
            font-size: 18px;
            font-weight: 700;
            color: #1f2937;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .modal-content {
            padding: 20px 24px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .label {
            font-size: 13px;
            font-weight: 700;
            color: #374151;
            margin-bottom: 8px;
            display: block;
        }

        .input-wrapper {
            position: relative;
        }

        .input-field {
            width: 100%;
            padding: 14px 16px;
            border: 2px solid #e5e7eb;
            border-radius: 10px;
            font-size: 15px;
            font-weight: 600;
            color: #1f2937;
            background: #f9fafb;
            transition: all 0.3s;
        }

        .input-field:focus {
            outline: none;
            border-color: #3b82f6;
            background: white;
        }

        .card-number-input {
            padding-right: 60px;
            font-family: 'Courier New', monospace;
            letter-spacing: 1px;
        }

        .card-logo {
            position: absolute;
            right: 16px;
            top: 50%;
            transform: translateY(-50%);
            height: 28px;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .card-logo.show {
            opacity: 1;
        }

        .card-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
        }

        .select-field {
            width: 100%;
            padding: 14px 16px;
            border: 2px solid #e5e7eb;
            border-radius: 10px;
            font-size: 15px;
            font-weight: 600;
            color: #1f2937;
            background: #f9fafb;
            appearance: none;
            cursor: pointer;
        }

        .info-box {
            background: #eff6ff;
            border-left: 4px solid #3b82f6;
            padding: 12px 16px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .info-box p {
            font-size: 12px;
            color: #1e40af;
            line-height: 1.5;
            font-weight: 500;
        }

        .modal-actions {
            padding: 16px 24px;
            display: flex;
            gap: 12px;
            border-top: 1px solid #f3f4f6;
        }

        .btn {
            flex: 1;
            padding: 14px;
            border: none;
            border-radius: 10px;
            font-size: 15px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn-cancel {
            background: #f3f4f6;
            color: #6b7280;
        }

        .btn-primary {
            background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);
            color: white;
        }

        .btn:active {
            transform: scale(0.98);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Payment Method Selection */
        .payment-methods {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-bottom: 20px;
        }

        .payment-method {
            padding: 14px 16px;
            border: 2px solid #e5e7eb;
            border-radius: 10px;
            display: flex;
            align-items: center;
            gap: 12px;
            cursor: pointer;
            transition: all 0.2s;
            background: #f9fafb;
        }

        .payment-method:hover {
            border-color: #3b82f6;
        }

        .payment-method.selected {
            border-color: #3b82f6;
            background: #eff6ff;
        }

        .payment-method-icon {
            width: 40px;
            height: 40px;
            background: white;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }

        .payment-method-info {
            flex: 1;
        }

        .payment-method-name {
            font-size: 14px;
            font-weight: 700;
            color: #1f2937;
            margin-bottom: 2px;
        }

        .payment-method-desc {
            font-size: 12px;
            color: #6b7280;
            font-weight: 500;
        }

        .payment-method-radio {
            width: 20px;
            height: 20px;
            border: 2px solid #d1d5db;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }

        .payment-method.selected .payment-method-radio {
            border-color: #3b82f6;
        }

        .payment-method-radio::after {
            content: '';
            width: 10px;
            height: 10px;
            background: #3b82f6;
            border-radius: 50%;
            opacity: 0;
            transform: scale(0);
            transition: all 0.2s;
        }

        .payment-method.selected .payment-method-radio::after {
            opacity: 1;
            transform: scale(1);
        }

        /* Card Form */
        .card-form {
            display: none;
            animation: fadeIn 0.3s;
        }

        .card-form.show {
            display: block;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Loading Spinner */
        .loading-spinner {
            display: inline-block;
            width: 16px;
            height: 16px;
            border: 2px solid rgba(255,255,255,0.3);
            border-top-color: white;
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <button class="back-btn" onclick="history.back()">‚Üê</button>
            <h1 class="header-title">Add Money</h1>
        </div>

        <!-- Content -->
        <div class="content">
            <!-- Bank Transfer Card -->
            <div class="account-card">
                <div class="account-header">
                    <div class="account-icon">üè¶</div>
                    <div class="account-info">
                        <div class="account-title">Bank Transfer</div>
                        <div class="account-subtitle">Add money via mobile or internet banking</div>
                    </div>
                </div>

                <div class="account-label">PayUtility Account Number</div>
                <div class="account-number">816 951 3224</div>

                <div class="account-actions">
                    <button class="action-btn copy" onclick="copyAccountNumber()">
                        <span>Copy Number</span>
                    </button>
                    <button class="action-btn share" onclick="shareDetails()">
                        <span>Share Details</span>
                    </button>
                </div>
            </div>

            <!-- Divider -->
            <div class="divider">
                <span class="divider-text">OR</span>
            </div>

            <!-- Other Options -->
            <div class="options-list">
                <!-- Cash Deposit -->
                <div class="option-item" onclick="openCashDeposit()">
                    <div class="option-icon">üíµ</div>
                    <div class="option-content">
                        <div class="option-title">Cash Deposit</div>
                        <div class="option-description">Fund your account with nearby merchants</div>
                    </div>
                    <div class="option-arrow">‚Ä∫</div>
                </div>

                <!-- Card/Account Top-up -->
                <div class="option-item" onclick="openCardTopup()">
                    <div class="option-icon">üí≥</div>
                    <div class="option-content">
                        <div class="option-title">Top-up with Card/Account</div>
                        <div class="option-description">Add money directly from your bank card or account</div>
                    </div>
                    <div class="option-arrow">‚Ä∫</div>
                </div>

                <!-- Bank USSD -->
                <div class="option-item" onclick="openBankUSSD()">
                    <div class="option-icon">üì±</div>
                    <div class="option-content">
                        <div class="option-title">Bank USSD</div>
                        <div class="option-description">With other banks' USSD code</div>
                    </div>
                    <div class="option-arrow">‚Ä∫</div>
                </div>

                <!-- Scan QR Code -->
                <div class="option-item" onclick="openQRScanner()">
                    <div class="option-icon">‚ö°</div>
                    <div class="option-content">
                        <div class="option-title">Scan my QR Code</div>
                        <div class="option-description">Show QR code to any PayUtility user</div>
                    </div>
                    <div class="option-arrow">‚Ä∫</div>
                </div>
            </div>
        </div>

        <!-- Bottom Navigation -->
        <div class="bottom-nav">
            <div class="nav-item active">
                <div class="nav-icon">üè†</div>
                <div class="nav-label">Home</div>
            </div>
            <div class="nav-item">
                <div class="nav-icon">üí≥</div>
                <div class="nav-label">Services</div>
            </div>
            <div class="nav-item">
                <div class="nav-icon">üìä</div>
                <div class="nav-label">History</div>
            </div>
            <div class="nav-item">
                <div class="nav-icon">üë§</div>
                <div class="nav-label">Account</div>
            </div>
        </div>
    </div>

    <!-- Card Top-up Modal -->
    <div class="modal-overlay" id="cardTopupModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">
                    <span>üí≥</span> Top-up with Card
                </h3>
            </div>
            <div class="modal-content">
                <div class="info-box">
                    <p><strong>‚ö° Instant:</strong> Money will be added to your wallet immediately!</p>
                </div>

                <form id="cardTopupForm">
                    <div class="form-group">
                        <label class="label">Amount</label>
                        <input type="number" class="input-field" placeholder="‚Ç¶0" id="topupAmount" min="100" required>
                        <p style="font-size: 11px; color: #6b7280; margin-top: 6px;">Min: ‚Ç¶100 | Max: ‚Ç¶1,000,000</p>
                    </div>

                    <div class="form-group">
                        <label class="label">Select Payment Method</label>
                        <div class="payment-methods">
                            <div class="payment-method selected" data-method="card" onclick="selectPaymentMethod(this)">
                                <div class="payment-method-icon">üí≥</div>
                                <div class="payment-method-info">
                                    <div class="payment-method-name">Debit Card</div>
                                    <div class="payment-method-desc">Visa, Mastercard, Verve</div>
                                </div>
                                <div class="payment-method-radio"></div>
                            </div>

                            <div class="payment-method" data-method="bank" onclick="selectPaymentMethod(this)">
                                <div class="payment-method-icon">üè¶</div>
                                <div class="payment-method-info">
                                    <div class="payment-method-name">Bank Account</div>
                                    <div class="payment-method-desc">Direct debit from your account</div>
                                </div>
                                <div class="payment-method-radio"></div>
                            </div>

                            <div class="payment-method" data-method="transfer" onclick="selectPaymentMethod(this)">
                                <div class="payment-method-icon">üîÑ</div>
                                <div class="payment-method-info">
                                    <div class="payment-method-name">Bank Transfer</div>
                                    <div class="payment-method-desc">Transfer from any bank</div>
                                </div>
                                <div class="payment-method-radio"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Card Payment Form -->
                    <div class="card-form show" id="cardPaymentForm">
                        <div class="form-group">
                            <label class="label">Card Number</label>
                            <div class="input-wrapper">
                                <input type="text" class="input-field card-number-input" placeholder="0000 0000 0000 0000" id="cardNumber" maxlength="19" required>
                                <svg class="card-logo" id="cardLogo" width="40" height="28" viewBox="0 0 40 28"></svg>
                            </div>
                        </div>

                        <div class="card-row">
                            <div class="form-group">
                                <label class="label">Expiry Date</label>
                                <input type="text" class="input-field" placeholder="MM/YY" id="cardExpiry" maxlength="5" required>
                            </div>

                            <div class="form-group">
                                <label class="label">CVV</label>
                                <input type="text" class="input-field" placeholder="123" id="cardCVV" maxlength="3" required>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="label">Card PIN</label>
                            <input type="password" class="input-field" placeholder="****" id="cardPIN" maxlength="4" required>
                        </div>

                        <div class="info-box" style="background: #fef3c7; border-left-color: #f59e0b;">
                            <p style="color: #78350f;"><strong>üîí Secure:</strong> Your card details are encrypted and never stored.</p>
                        </div>
                    </div>

                    <!-- Bank Account Form -->
                    <div class="card-form" id="bankPaymentForm">
                        <div class="form-group">
                            <label class="label">Select Bank</label>
                            <select class="select-field" required>
                                <option value="">Choose your bank</option>
                                <option value="gtb">GTBank</option>
                                <option value="access">Access Bank</option>
                                <option value="zenith">Zenith Bank</option>
                                <option value="uba">UBA</option>
                                <option value="first">First Bank</option>
                            </select>
                        </div>

                        <div class="info-box">
                            <p><strong>‚ÑπÔ∏è Note:</strong> You'll be redirected to your bank's secure page to authorize the payment.</p>
                        </div>
                    </div>

                    <!-- Transfer Form -->
                    <div class="card-form" id="transferPaymentForm">
                        <div class="info-box">
                            <p><strong>üì± Instructions:</strong> Transfer the exact amount to the account details shown above and your wallet will be credited automatically.</p>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-actions">
                <button class="btn btn-cancel" onclick="closeModal('cardTopupModal')">Cancel</button>
                <button class="btn btn-primary" id="proceedBtn" onclick="processCardTopup()">Continue</button>
            </div>
        </div>
    </div>

    <!-- USSD Modal -->
    <div class="modal-overlay" id="ussdModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">
                    <span>üì±</span> Bank USSD
                </h3>
            </div>
            <div class="modal-content">
                <div class="info-box">
                    <p><strong>üí° How it works:</strong> Dial the USSD code below with your registered phone number.</p>
                </div>

                <div style="background: #f9fafb; padding: 16px; border-radius: 12px; margin-bottom: 16px;">
                    <div style="font-size: 12px; color: #6b7280; margin-bottom: 8px; font-weight: 600;">Select Your Bank</div>
                    
                    <div style="display: flex; flex-direction: column; gap: 12px;">
                        <div style="padding: 12px; background: white; border-radius: 8px; cursor: pointer;" onclick="showUSSDCode('GTBank', '*737*50*816951322*Amount#')">
                            <div style="font-weight: 700; font-size: 14px; color: #1f2937; margin-bottom: 4px;">GTBank</div>
                            <div style="font-size: 12px; color: #6b7280;">*737*50*Amount#</div>
                        </div>

                        <div style="padding: 12px; background: white; border-radius: 8px; cursor: pointer;" onclick="showUSSDCode('Access Bank', '*901*816951322*Amount#')">
                            <div style="font-weight: 700; font-size: 14px; color: #1f2937; margin-bottom: 4px;">Access Bank</div>
                            <div style="font-size: 12px; color: #6b7280;">*901*Amount#</div>
                        </div>

                        <div style="padding: 12px; background: white; border-radius: 8px; cursor: pointer;" onclick="showUSSDCode('Zenith Bank', '*966*Amount*816951322#')">
                            <div style="font-weight: 700; font-size: 14px; color: #1f2937; margin-bottom: 4px;">Zenith Bank</div>
                            <div style="font-size: 12px; color: #6b7280;">*966*Amount#</div>
                        </div>

                        <div style="padding: 12px; background: white; border-radius: 8px; cursor: pointer;" onclick="showUSSDCode('UBA', '*919*816951322*Amount#')">
                            <div style="font-weight: 700; font-size: 14px; color: #1f2937; margin-bottom: 4px;">UBA</div>
                            <div style="font-size: 12px; color: #6b7280;">*919*Amount#</div>
                        </div>

                        <div style="padding: 12px; background: white; border-radius: 8px; cursor: pointer;" onclick="showUSSDCode('First Bank', '*894*816951322*Amount#')">
                            <div style="font-weight: 700; font-size: 14px; color: #1f2937; margin-bottom: 4px;">First Bank</div>
                            <div style="font-size: 12px; color: #6b7280;">*894*Amount#</div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-actions">
                <button class="btn btn-cancel" onclick="closeModal('ussdModal')">Close</button>
            </div>
        </div>
    </div>

    <!-- QR Code Modal -->
    <div class="modal-overlay" id="qrModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">
                    <span>‚ö°</span> My QR Code
                </h3>
            </div>
            <div class="modal-content">
                <div style="text-align: center; padding: 20px;">
                    <div style="width: 200px; height: 200px; margin: 0 auto 20px; background: #f9fafb; border-radius: 16px; display: flex; align-items: center; justify-content: center; font-size: 80px;">
                        üì±
                    </div>
                    <div style="font-size: 16px; font-weight: 700; color: #1f2937; margin-bottom: 8px;">EMMANUEL ADEOLA</div>
                    <div style="font-size: 14px; color: #6b7280; margin-bottom: 4px;">@emmanuel_payutility</div>
                    <div style="font-size: 13px; color: #6b7280; font-weight: 600;">Account: 816 951 3224</div>
                </div>

                <div class="info-box">
                    <p><strong>‚ÑπÔ∏è How to use:</strong> Show this QR code to anyone who wants to send you money via PayUtility.</p>
                </div>
            </div>
            <div class="modal-actions">
                <button class="btn btn-cancel" onclick="closeModal('qrModal')">Close</button>
                <button class="btn btn-primary" onclick="shareQRCode()">Share QR</button>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast"></div>

    <script>
        let selectedPaymentMethod = 'card';

        // Card logos SVG definitions
        const cardLogos = {
            visa: `<svg viewBox="0 0 750 471" xmlns="http://www.w3.org/2000/svg"><rect fill="#0066b2" width="750" height="471"/><path d="M278.2 334.2h-52.4l32.7-201.2h52.4l-32.7 201.2zm186.5-197.5c-10.4-4-26.6-8.2-46.9-8.2-51.7 0-88.1 27.5-88.4 66.9-.3 29.1 26 45.4 45.8 55.1 20.3 9.9 27.2 16.3 27.1 25.1-.1 13.5-16.2 19.7-31.1 19.7-20.8 0-31.9-3.1-49-10.5l-6.7-3.2-7.3 45.2c12.3 5.6 35 10.6 58.6 10.8 55 0 90.6-27.2 91-69.2.2-23.1-13.8-40.6-44-55.1-18.3-9.4-29.5-15.7-29.4-25.2 0-8.4 9.5-17.5 29.9-17.5 17.1-.3 29.4 3.6 39 7.7l4.7 2.3 7.1-43.8zM616 133l-40.8.1c-12.7 0-22.1 3.6-27.7 16.8l-78.6 184.4h55l10.9-30.2h67.2c1.6 7.1 6.4 30.2 6.4 30.2h48.5L616 133zm-65.7 130.3c4.3-11.5 20.8-56.3 20.8-56.3-.3.5 4.3-11.7 6.9-19.3l3.6 17.4s10 48.9 12.1 59.2h-43.4zM232.2 133l-51.3 137.9-5.5-27.8c-9.4-32-38.8-66.7-71.8-84l47 174.9 55.4-.1 82.4-201h-56.2z" fill="#fff"/><path d="M131.6 133H45.8l-.7 4.4c65.7 16.8 109.2 57.5 127.2 106.2l-18.4-93.7c-3-12.8-12.3-16.6-22.3-16.9z" fill="#f9a533"/></svg>`,
            mastercard: `<svg viewBox="0 0 750 471" xmlns="http://www.w3.org/2000/svg"><rect fill="#000" width="750" height="471"/><circle fill="#eb001b" cx="269.5" cy="235.5" r="147.5"/><circle fill="#f79e1b" cx="480.5" cy="235.5" r="147.5"/><path fill="#ff5f00" d="M375 113.3c-26.3 20.8-43.4 52.8-43.4 88.7s17.1 67.9 43.4 88.7c26.3-20.8 43.4-52.8 43.4-88.7s-17.1-67.9-43.4-88.7z"/></svg>`,
            verve: `<svg viewBox="0 0 750 471" xmlns="http://www.w3.org/2000/svg"><rect fill="#00425f" width="750" height="471"/><path fill="#ef3124" d="M375 115l-50 241h50l50-241z"/><path fill="#00a65f" d="M325 115l-50 241h50l50-241z"/><path fill="#f8991d" d="M425 115l-50 241h50l50-241z"/></svg>`
        };

        // Detect card type
        function detectCardType(number) {
            const cleaned = number.replace(/\s/g, '');
            
            if (/^4/.test(cleaned)) return 'visa';
            if (/^5[1-5]/.test(cleaned) || /^2[2-7]/.test(cleaned)) return 'mastercard';
            if (/^506[01]/.test(cleaned)) return 'verve';
            
            return null;
        }

        // Format card number
        function formatCardNumber(value) {
            const cleaned = value.replace(/\s/g, '');
            const chunks = cleaned.match(/.{1,4}/g);
            return chunks ? chunks.join(' ') : cleaned;
        }

        // Card number input handler
        document.getElementById('cardNumber').addEventListener('input', function(e) {
            let value = e.target.value.replace(/\s/g, '').replace(/\D/g, '');
            e.target.value = formatCardNumber(value);
            
            const cardType = detectCardType(value);
            const cardLogo = document.getElementById('cardLogo');
            
            if (cardType && cardLogos[cardType]) {
                cardLogo.innerHTML = cardLogos[cardType];
                cardLogo.classList.add('show');
            } else {
                cardLogo.classList.remove('show');
            }
        });

        // Format expiry date
        document.getElementById('cardExpiry').addEventListener('input', function(e) {
            let value = e.target.value.replace(/\D/g, '');
            
            if (value.length >= 2) {
                value = value.substring(0, 2) + '/' + value.substring(2, 4);
            }
            
            e.target.value = value;
        });

        // CVV input - numbers only
        document.getElementById('cardCVV').addEventListener('input', function(e) {
            e.target.value = e.target.value.replace(/\D/g, '');
        });

        // PIN input - numbers only
        document.getElementById('cardPIN').addEventListener('input', function(e) {
            e.target.value = e.target.value.replace(/\D/g, '');
        });

        // Select payment method
        function selectPaymentMethod(element) {
            document.querySelectorAll('.payment-method').forEach(m => m.classList.remove('selected'));
            element.classList.add('selected');
            selectedPaymentMethod = element.dataset.method;
            
            // Hide all forms
            document.querySelectorAll('.card-form').forEach(f => f.classList.remove('show'));
            
            // Show selected form
            if (selectedPaymentMethod === 'card') {
                document.getElementById('cardPaymentForm').classList.add('show');
            } else if (selectedPaymentMethod === 'bank') {
                document.getElementById('bankPaymentForm').classList.add('show');
            } else if (selectedPaymentMethod === 'transfer') {
                document.getElementById('transferPaymentForm').classList.add('show');
            }
        }

        // Copy account number
        function copyAccountNumber() {
            const accountNumber = '816 951 3224';
            copyToClipboard(accountNumber);
            showToast('‚úì Account number copied!');
        }

        // Share details
        function shareDetails() {
            const details = `PayUtility Account Details\n\nAccount Number: 816 951 3224\nAccount Name: EMMANUEL ADEOLA\nBank: PayUtility`;
            
            if (navigator.share) {
                navigator.share({
                    title: 'PayUtility Account Details',
                    text: details
                }).catch(() => {
                    copyToClipboard(details);
                    showToast('Details copied to clipboard!');
                });
            } else {
                copyToClipboard(details);
                showToast('Details copied to clipboard!');
            }
        }

        // Open cash deposit
        function openCashDeposit() {
            showToast('Finding nearby merchants...');
            setTimeout(() => {
                alert('üè™ Nearby Merchants\n\nThis feature will show PayUtility agents near you where you can deposit cash.\n\nComing soon!');
            }, 1000);
        }

        // Open card topup
        function openCardTopup() {
            document.getElementById('cardTopupModal').classList.add('active');
        }

        // Open bank USSD
        function openBankUSSD() {
            document.getElementById('ussdModal').classList.add('active');
        }

        // Open QR scanner
        function openQRScanner() {
            document.getElementById('qrModal').classList.add('active');
        }

        // Show USSD code
        function showUSSDCode(bank, code) {
            copyToClipboard(code);
            showToast(`‚úì ${bank} USSD code copied!`);
            setTimeout(() => {
                closeModal('ussdModal');
            }, 1500);
        }

        // Share QR code
        function shareQRCode() {
            if (navigator.share) {
                navigator.share({
                    title: 'My PayUtility QR Code',
                    text: 'Scan this QR code to send me money via PayUtility\n\nAccount: 816 951 3224\nName: EMMANUEL ADEOLA'
                }).catch(() => {
                    showToast('QR code sharing coming soon!');
                });
            } else {
                showToast('QR code sharing coming soon!');
            }
        }

        // Close modal
        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }

        // Process card topup
        function processCardTopup() {
            const amount = document.getElementById('topupAmount').value;

            if (!amount || amount < 100) {
                showToast('‚ö†Ô∏è Minimum amount is ‚Ç¶100');
                return;
            }

            if (amount > 1000000) {
                showToast('‚ö†Ô∏è Maximum amount is ‚Ç¶1,000,000');
                return;
            }

            if (selectedPaymentMethod === 'card') {
                const cardNumber = document.getElementById('cardNumber').value;
                const cardExpiry = document.getElementById('cardExpiry').value;
                const cardCVV = document.getElementById('cardCVV').value;
                const cardPIN = document.getElementById('cardPIN').value;

                if (!cardNumber || cardNumber.replace(/\s/g, '').length < 16) {
                    showToast('‚ö†Ô∏è Please enter a valid card number');
                    return;
                }

                if (!cardExpiry || cardExpiry.length < 5) {
                    showToast('‚ö†Ô∏è Please enter card expiry date');
                    return;
                }

                if (!cardCVV || cardCVV.length < 3) {
                    showToast('‚ö†Ô∏è Please enter CVV');
                    return;
                }

                if (!cardPIN || cardPIN.length !== 4) {
                    showToast('‚ö†Ô∏è Please enter 4-digit PIN');
                    return;
                }

                const cardType = detectCardType(cardNumber);
                const cardName = cardType ? cardType.charAt(0).toUpperCase() + cardType.slice(1) : 'Card';

                const btn = document.getElementById('proceedBtn');
                const originalText = btn.textContent;
                btn.innerHTML = '<span class="loading-spinner"></span> Processing...';
                btn.disabled = true;

                setTimeout(() => {
                    showToast(`‚úì ‚Ç¶${parseInt(amount).toLocaleString()} added via ${cardName}!`);
                    btn.textContent = originalText;
                    btn.disabled = false;
                    closeModal('cardTopupModal');
                    document.getElementById('cardTopupForm').reset();
                    document.getElementById('cardLogo').classList.remove('show');
                    
                    // Success notification
                    setTimeout(() => {
                        alert('‚úì Payment Successful!\n\n‚Ç¶' + parseInt(amount).toLocaleString() + ' has been added to your wallet.\n\nTransaction ID: TXN' + Date.now());
                    }, 500);
                }, 2500);
            } else if (selectedPaymentMethod === 'bank') {
                showToast('üè¶ Redirecting to bank...');
                setTimeout(() => {
                    alert('üè¶ Bank Payment\n\nYou will be redirected to your bank\'s secure page to authorize this payment.\n\nAmount: ‚Ç¶' + parseInt(amount).toLocaleString());
                    closeModal('cardTopupModal');
                }, 1500);
            } else if (selectedPaymentMethod === 'transfer') {
                showToast('üì± Transfer details ready');
                setTimeout(() => {
                    alert('üì± Bank Transfer\n\nTransfer ‚Ç¶' + parseInt(amount).toLocaleString() + ' to:\n\nAccount: 816 951 3224\nBank: PayUtility\n\nYour wallet will be credited automatically.');
                    closeModal('cardTopupModal');
                }, 1000);
            }
        }

        // Copy to clipboard
        function copyToClipboard(text) {
            if (navigator.clipboard) {
                navigator.clipboard.writeText(text);
            } else {
                const textarea = document.createElement('textarea');
                textarea.value = text;
                textarea.style.position = 'fixed';
                textarea.style.left = '-999999px';
                document.body.appendChild(textarea);
                textarea.select();
                document.execCommand('copy');
                document.body.removeChild(textarea);
            }
        }

        // Show toast
        function showToast(message) {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.classList.add('show');
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        // Close modal on overlay click
        document.querySelectorAll('.modal-overlay').forEach(overlay => {
            overlay.addEventListener('click', function(e) {
                if (e.target === this) {
                    this.classList.remove('active');
                }
            });
        });

        // Navigation
        const navItems = document.querySelectorAll('.nav-item');
        navItems.forEach(item => {
            item.addEventListener('click', function() {
                navItems.forEach(i => i.classList.remove('active'));
                this.classList.add('active');
            });
        });

        // Validate amount input
        document.getElementById('topupAmount').addEventListener('input', function(e) {
            if (this.value < 0) {
                this.value = 0;
            }
        });

        // Auto-format on blur
        document.getElementById('topupAmount').addEventListener('blur', function() {
            if (this.value) {
                const value = parseFloat(this.value);
                if (!isNaN(value)) {
                    this.value = Math.floor(value);
                }
            }
        });

        console.log('‚úÖ PayUtility Add Money page initialized successfully!');
    </script>
</body>
</html>
